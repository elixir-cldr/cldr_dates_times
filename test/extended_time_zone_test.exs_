defmodule Cldr.DateTime.ExtendedTimeZoneTest do
  use ExUnit.Case, async: true
  import Cldr.DateTime.TestHelpers

  @moduletag :extended_time_zone

  @test_locales [:en, :ja, :ar, :fr, :de, :it]

  for {zone, _} <- Cldr.Timezone.territories_by_timezone(),
      locale <- @test_locales,
      non_location_zones(zone) do
    test "Non-location format for #{inspect(zone)} in locale #{inspect(locale)}" do
      assert {:ok, _} =
               Timezone.non_location_format(unquote(zone),
                 format: :long,
                 locale: unquote(locale)
               )

      assert {:ok, _} =
               Timezone.non_location_format(unquote(zone),
                 format: :short,
                 locale: unquote(locale)
               )

      assert {:ok, _} =
               Timezone.non_location_format(unquote(zone),
                 type: :standard,
                 locale: unquote(locale)
               )

      assert {:ok, _} =
               Timezone.non_location_format(unquote(zone),
                 type: :daylight,
                 locale: unquote(locale)
               )
    end

    test "Location format for #{inspect(zone)} in locale #{inspect(locale)}" do
      assert {:ok, _} =
               Timezone.location_format(unquote(zone),
                 format: :long,
                 locale: unquote(locale)
               )

      assert {:ok, _} =
               Timezone.location_format(unquote(zone),
                 format: :short,
                 locale: unquote(locale)
               )

      assert {:ok, _} =
               Timezone.location_format(unquote(zone),
                 type: :standard,
                 locale: unquote(locale)
               )

      assert {:ok, _} =
               Timezone.location_format(unquote(zone),
                 type: :daylight,
                 locale: unquote(locale)
               )
    end
  end

  for {zone, _} <- Cldr.Timezone.territories_by_timezone(),
      locale <- @test_locales,
      zone not in ["Factory", "Etc/Unknown"] do
    test "GMT format for #{inspect(zone)} in locale #{inspect(locale)}" do
      assert {:ok, _} = Timezone.gmt_format(unquote(zone))
    end
  end
end